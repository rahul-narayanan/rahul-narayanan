
@Injectable()
export class AttachResponseToRequestMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction) {
    const originalSend = res.send;

    // Override the default send method of the response object
    res.send = function (body: any) {
      // Attach the response data to the request object
      req.responseData = body; // You can attach any specific data you want here

      // Call the original send method to send the response
      originalSend.call(this, body);
    };

    // Continue processing the request
    next();
  }
}
